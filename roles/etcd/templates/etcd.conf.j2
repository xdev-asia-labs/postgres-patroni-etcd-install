# etcd configuration file
# Generated by Ansible - Do not edit manually

# Member name
ETCD_NAME="{{ etcd_name }}"

# Data directory
ETCD_DATA_DIR="{{ etcd_data_dir }}/{{ etcd_name }}.etcd"

# Listen URLs
ETCD_LISTEN_PEER_URLS="http://{{ ansible_host }}:{{ etcd_peer_port }}"
ETCD_LISTEN_CLIENT_URLS="http://{{ ansible_host }}:{{ etcd_client_port }},http://127.0.0.1:{{ etcd_client_port }}"

# Advertise URLs
ETCD_INITIAL_ADVERTISE_PEER_URLS="http://{{ ansible_host }}:{{ etcd_peer_port }}"
ETCD_ADVERTISE_CLIENT_URLS="http://{{ ansible_host }}:{{ etcd_client_port }}"

# Cluster configuration
ETCD_INITIAL_CLUSTER="{% for host in groups['postgres'] %}{{ hostvars[host]['etcd_name'] }}=http://{{ hostvars[host]['ansible_host'] }}:{{ etcd_peer_port }}{% if not loop.last %},{% endif %}{% endfor %}"
ETCD_INITIAL_CLUSTER_STATE="new"
ETCD_INITIAL_CLUSTER_TOKEN="{{ etcd_cluster_token }}"

# Logging
ETCD_LOG_LEVEL="info"

# Performance tuning
ETCD_HEARTBEAT_INTERVAL="250"
ETCD_ELECTION_TIMEOUT="1250"

# Quota
ETCD_QUOTA_BACKEND_BYTES="8589934592"

{% if etcd_auth_enabled | default(false) %}
# Authentication
ETCD_AUTH_TOKEN="jwt"
{% endif %}
